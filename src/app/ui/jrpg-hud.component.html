<div class="hud">
  <div class="status-frame">
    <div class="portrait">
      <div class="portrait-inner">K</div>
    </div>
    <div class="stats">
      <div class="title">LVL {{ level }} KAI</div>
      <div class="bar-container">
        <div class="hp-bar" [style.width.%]="hpPercent"></div>
        <span class="hp-text">{{ hp | number:'1.0-0' }}/{{ maxHp }}</span>
      </div>
      <div class="bar-container xp">
        <div class="xp-bar" [style.width.%]="xpPercent"></div>
      </div>
    </div>
  </div>

  <div class="minimap">
    <div class="grid"></div>
    <div class="player-dot"></div>
    <div class="coords" *ngIf="playerPos">
      {{ playerPos.x | number:'1.0-0' }}, {{ playerPos.y | number:'1.0-0' }}
    </div>
  </div>

  <button type="button" class="dialogue-box" *ngIf="dialogueNode" (click)="advanceDialogue()">
    <div class="speaker">{{ dialogueNode.speaker }}</div>
    <div class="text">{{ dialogueNode.text }}</div>
    <div class="prompt">TAP TO CONTINUE</div>
  </button>

  <div class="controls">
    <div class="dpad">
      <button type="button" class="dpad-btn left" (pointerdown)="handlePress('left', true)" (pointerup)="handlePress('left', false)" (pointerleave)="handlePress('left', false)">←</button>
      <button type="button" class="dpad-btn right" (pointerdown)="handlePress('right', true)" (pointerup)="handlePress('right', false)" (pointerleave)="handlePress('right', false)">→</button>
      <button type="button" class="dpad-btn down" (pointerdown)="handlePress('slide', true)" (pointerup)="handlePress('slide', false)" (pointerleave)="handlePress('slide', false)">↓</button>
      <button type="button" class="dpad-btn up" (pointerdown)="handlePress('jump', true)" (pointerup)="handlePress('jump', false)" (pointerleave)="handlePress('jump', false)">↑</button>
    </div>

    <div class="actions">
      <button type="button" class="action-btn attack" (pointerdown)="handlePress('attack', true)" (pointerup)="handlePress('attack', false)" (pointerleave)="handlePress('attack', false)">ATK</button>
      <button type="button" class="action-btn jump" (pointerdown)="handlePress('jump', true)" (pointerup)="handlePress('jump', false)" (pointerleave)="handlePress('jump', false)">JUMP</button>
      <button type="button" class="action-btn run" (pointerdown)="handlePress('run', true)" (pointerup)="handlePress('run', false)" (pointerleave)="handlePress('run', false)">RUN</button>
    </div>
  </div>
</div>
