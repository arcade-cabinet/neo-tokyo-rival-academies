<div class="quest-dialog" *ngIf="isOpen && quest">
  <div class="quest-dialog__content" [style.borderColor]="getQuestTypeColor(quest.type)">
    <div class="header">
      <div class="type-label" [style.color]="getQuestTypeColor(quest.type)">
        {{ getQuestTypeLabel(quest.type) }}
      </div>
      <h2>{{ quest.title }}</h2>
    </div>

    <div class="description-card">
      <div class="label">Quest Brief</div>
      <p>{{ quest.description }}</p>
    </div>

    <div class="objective">
      <div class="label">Objective</div>
      <div class="text">{{ quest.objective }}</div>
    </div>

    <div class="meta">
      <div class="location">ğŸ“ {{ quest.location }}</div>
      <div class="alignment" [style.color]="getAlignmentColor(quest.alignmentBias)">
        {{ getAlignmentLabel(quest.alignmentBias) }}
      </div>
    </div>

    <div class="rewards">
      <div class="label">Rewards</div>
      <div class="reward-row">
        <span>â­</span>
        <span>{{ quest.rewards.xp }} XP</span>
      </div>
      <div class="reward-row">
        <span>ğŸ’°</span>
        <span>{{ quest.rewards.credits }} Credits</span>
      </div>
      <div class="reward-row" *ngIf="getAlignmentShift(quest) as alignmentShift">
        <span>{{ alignmentShift.faction === 'kurenai' ? 'ğŸ”¥' : 'âš¡' }}</span>
        <span [style.color]="getAlignmentColor(alignmentShift.faction)">
          {{ alignmentShift.faction === 'kurenai' ? 'Kurenai' : 'Azure' }}
          +{{ alignmentShift.amount }}
        </span>
      </div>
      <div class="reward-row" *ngIf="quest.rewards.items?.length as itemCount">
        <span>ğŸ</span>
        <span>{{ itemCount }} Item{{ itemCount > 1 ? 's' : '' }}</span>
      </div>
    </div>

    <div class="actions">
      <button type="button" class="accept" (click)="accept.emit()">Accept Quest</button>
      <button type="button" class="decline" (click)="decline.emit()">Decline</button>
    </div>
  </div>
</div>
