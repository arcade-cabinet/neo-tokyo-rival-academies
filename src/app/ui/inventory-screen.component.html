<div class="inventory" *ngIf="isOpen">
  <div class="inventory__header">
    <div>
      <h2>Inventory</h2>
      <div class="credits">ðŸ’° {{ credits | number }}</div>
    </div>
    <button type="button" (click)="close.emit()">Ã—</button>
  </div>

  <div class="inventory__filters">
    <button
      *ngFor="let f of filters"
      type="button"
      [class.active]="filter === f"
      (click)="setFilter(f)"
    >
      {{ f.replace('_', ' ') }}
    </button>
  </div>

  <div class="inventory__content">
    <div class="inventory__grid">
      <div class="empty" *ngIf="filteredInventory().length === 0">No items in this category yet.</div>

      <button
        type="button"
        class="item"
        *ngFor="let item of filteredInventory()"
        (click)="selectedItem = item"
        [class.selected]="selectedItem?.id === item.id"
        [class.equipped]="item.equipped"
      >
        <div class="equipped-badge" *ngIf="item.equipped">âœ“</div>
        <div class="icon">{{ getItemTypeIcon(item.type) }}</div>
        <div class="name">{{ item.name }}</div>
        <div class="qty" *ngIf="item.quantity > 1">Ã—{{ item.quantity }}</div>
      </button>
    </div>

    <div class="inventory__details" *ngIf="selectedItem">
      <div class="detail-icon">{{ getItemTypeIcon(selectedItem.type) }}</div>
      <h3>{{ selectedItem.name }}</h3>
      <p class="type" [style.color]="getItemTypeColor(selectedItem.type)">
        {{ selectedItem.type.replace('_',' ') }}
      </p>

      <div class="quantity" *ngIf="selectedItem.quantity > 1">
        Quantity: {{ selectedItem.quantity }}
      </div>

      <p class="desc">{{ selectedItem.description || 'A well-crafted item.' }}</p>

      <div class="detail-actions">
        <button type="button" class="use-btn" (click)="handleUseItem()" *ngIf="selectedItem.type === 'consumable'">
          Use Item
        </button>
        <div class="equipped-pill" *ngIf="selectedItem.equipped">âœ“ Equipped</div>
        <button
          type="button"
          class="equip-btn"
          *ngIf="(selectedItem.type === 'weapon' || selectedItem.type === 'accessory') && !selectedItem.equipped"
          (click)="handleEquipItem()"
        >
          Equip
        </button>
      </div>
    </div>
  </div>
</div>
